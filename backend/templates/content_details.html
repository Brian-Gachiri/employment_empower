{% extends 'layouts/base.html' %}
{% load static %}

{% block content %}


    <div class="pagetitle">
      <h1>{{ client.get_full_name }}</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
          <li class="breadcrumb-item active"><a href="{% url 'job_seekers' %}">Job Seekers</a></li>
          <li class="breadcrumb-item active">Details</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

<section class="py-2">
  <div class="container-fluid">
      <div class="d-flex flex-row justify-content-end">
         <a href="#" class="btn btn-light mx-1 my-1">Schedule Private Session</a>
         <a href="#" class="btn btn-main-light mx-1 my-1">Change Membership</a>
         <a href="#" class="btn btn-danger mx-1 my-1">Deactivate Account</a>
      </div>
    <div class="row">
      <div class="col-lg-4 mt-2">
        <div class="card border-0 bg-white">
          <div class="rounded-top shadow-sm text-white d-flex flex-row bg-main-light" style="height:200px;">
            <div class="ms-4 mt-5 d-flex flex-column" style="width: 150px;height: 180px !important;">
              <img src="{{ client.profile_image.url }}"
                alt="Generic placeholder image" class="img-fluid img-thumbnail mt-4 mb-2"
                style="width: 150px; height: 180px !important; z-index: 1; object-fit: cover">
            </div>
            <div class="ms-3" style="margin-top: 130px; z-index: 1">
              <h5 class="text-main-dark">{{ client.get_full_name }}</h5>
              <div class="d-flex justify-content-center text-center py-1">
                <a href="" class="mx-2"><i class="bi bi-twitter"></i></a>
                <a href="" class="mx-2"><i class="bi bi-facebook"></i></a>
                <a href="" class="mx-2"><i class="bi bi-linkedin"></i></a>
            </div>
            </div>
          </div>
            <div class="card-body pt-5 bg-main-lighter rounded-bottom">
                {% if client.interests %}
                <h5 class="text-main">Bio</h5>
                <p class="text-main-light">{{ client.interests }}</p>
                {% endif %}
                <p class="text-main-light mb-0 mt-1 fs-6"><i class="bi bi-phone-fill"></i> +{{ client.phone_number }}</p>
                <p class="text-main-light mt-1 fs-6"><i class="bi bi-envelope-fill"></i> {{ client.email }}</p>
                <a href="/" class="mt-3 btn btn-main">Edit Profile</a>
            </div>
        </div>
      </div>
        <div class="col-lg-8 mt-2">
            <div class="card">
                <div class="card-body">
                      <h6 class="text-main mt-2 mb-4">Recent Activity</h6>
                          {% for activity in client.activites.all %}
                              <div class="bg-secondary-light mb-4" style="height: 1px"></div>
                            <p class="fs-6"><i class="bi bi-dot"></i>
                                <span class="px-2 py-1 bg-accent-light text-accent-dark rounded fs-6">{{ activity.content.type_name }}</span> {{ activity.activity_text }} <span class="text-main-light">- {{ activity.created_at }}</span></p>
                          {% empty %}
                            {% include 'layouts/empty_section.html' with action_button=False message="No recent activity recorded" %}
                          {% endfor %}
                </div>
            </div>
            <div class="card mt-3">
                <div class="card-body">
                      <h6 class="text-main mt-2 mb-4">Private Sessions</h6>
                    {% for session in sessions %}
                        <p class="fs-6"><i class="bi bi-dot"></i>
                            <span class="px-2 py-1 {{ session.status_color }} rounded fs-6">{{ session.status_text }}</span>    Private session on  {{ session.schedule_time }}
                            {% if session.status == session.ACTIVE or session.status == session.RESCHEDULED or session.status == session.PENDING and session.instructor == request.user %}
                                <a href="{{ session.meeting_url }}" target="_blank" class="btn btn-main-light btn-sm"><i class="bi bi-box-arrow-up-right"></i></a>
                            {% endif %}
                        </p>
                    {% empty %}
                         {% include 'layouts/empty_section.html' with action_button=True modal_button=True modal_id="#sessionModal" btn_text="Schedule Private Session" message="No private sessions scheduled yet" %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
  </div>
</section>


{% endblock %}